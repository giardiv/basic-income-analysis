runApp('Lines/R/stockVis')
runApp('Lines/R/stockVis')
runApp('Lines/R/stockVis')
runApp('Lines/R/stockVis')
runApp('Lines/R/stockVis')
shiny::runApp('Lines/R/stockVis')
install.packages(c("quantmod"))
runApp('Lines/R/stockVis')
runApp('Lines/R/stockVis')
install.packages(c("zoo"))
runApp('Lines/R/stockVis')
nsubjects <- 10
ya <- rnorm(nsubjects)
yb <- rnorm(nsubjects, mean= 0.2)
xa <- rep("A", nsubjects)
xb <- rep("B", nsubjects)
y <- c(ya, yb)
x <- c(xa, xb)
df <- cbind(x, y)
View(df)
t.test(y-x, alternative="greater", data=df)
t.test(y - x, alternative="greater", data=df)
t.test(y-x, alternative="greater", data=df)
df <- as.data.cbind(x, y)
t.test(y-x, alternative="greater", data=df)
df <- data.frame(x, y)
t.test(y-x, alternative="greater", data=df)
factors(df$x)
library(shiny); runApp('Lines/basic-income/script.R')
install.packages("rgdal", type = "source", configure.args = "--with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/1.11/unix/bin/gdal-config --with-proj-include=/Library/Frameworks/PROJ.framework/unix/include --with-proj-lib=/Library/Frameworks/PROJ.framework/unix/lib")
install.packages("rgeos", type = "source")
install.packages("geosjon")
install.packages("geojson")
runApp('Lines/basic-income/script.R')
install.packages("geojsonio")
install.packages("geojsonio")
library(shiny); runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
install.packages("leaflet")
install.packages("htmltools")
install.packages("htmltools")
library(shiny); runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
install.packages("potly")
library(shiny); runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
# Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
chart_link = api_create(p, filename="maps-small-multiple")
Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
#chart_link = api_create(p, filename="maps-small-multiple")
#
# Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
#chart_link = api_create(p, filename="maps-small-multiple")
#chart_link
# Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
#chart_link = api_create(p, filename="maps-small-multiple")
#chart_link
p
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
source('~/Lines/R/test/teest.R')
install.packages("plotly")
install.packages("plotly")
source('~/Lines/R/test/teest.R')
source('~/Lines/R/test/teest.R')
source('~/Lines/R/test/teest.R')
library(plotly)
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2011_us_ag_exports.csv")
df$hover <- with(df, paste(state, '<br>', "Beef", beef, "Dairy", dairy, "<br>",
"Fruits", total.fruits, "Veggies", total.veggies,
"<br>", "Wheat", wheat, "Corn", corn))
# give state boundaries a white border
l <- list(color = toRGB("white"), width = 2)
# specify some map projection/options
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showlakes = TRUE,
lakecolor = toRGB('white')
)
p <- plot_geo(df, locationmode = 'USA-states') %>%
add_trace(
z = ~total.exports, text = ~hover, locations = ~code,
color = ~total.exports, colors = 'Purples'
) %>%
colorbar(title = "Millions USD") %>%
layout(
title = '2011 US Agriculture Exports by State<br>(Hover for breakdown)',
geo = g
)
p
spdf <- geojson_read("data/europe.geo.json",  what = "sp")
names(spdf)
library(geojsonio)
spdf <- geojson_read("data/europe.geo.json",  what = "sp")
names(spdf)
library(geojsonio)
spdf <- geojson_read("data/europe.geo.json",  what = "sp")
names(spdf)
library(shiny); runApp('Lines/basic-income/script.R')
library(geojsonio)
require(leaflet)
require(htmltools)
spdf <- geojson_read("data/europe.geo.json",  what = "sp")
names(spdf)
bins <- c(0, 1, 2, 3, 4, 5, 6, 7, Inf)
pal <- colorBin("YlOrRd", domain = spdf$labelrank, bins = bins)
labels <- sprintf(
"<strong>%s</strong><br/>%g </sup>",
spdf$admin, spdf$labelrank
) %>% lapply(htmltools::HTML)
m <- leaflet(spdf) %>%
setView(15, 54, 3) %>%
addProviderTiles("MapBox", options = providerTileOptions(
id = "mapbox.light",
accessToken = Sys.getenv('MAPBOX_ACCESS_TOKEN')))
m %>% addPolygons(
fillColor = ~pal(labelrank),
weight = 2,
opacity = 1,
color = "white",
dashArray = "3",
fillOpacity = 0.7,
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto")
)
library(geojsonio)
require(leaflet)
require(htmltools)
spdf <- geojson_read("europe.geo.json",  what = "sp")
names(spdf)
bins <- c(0, 1, 2, 3, 4, 5, 6, 7, Inf)
pal <- colorBin("YlOrRd", domain = spdf$labelrank, bins = bins)
labels <- sprintf(
"<strong>%s</strong><br/>%g </sup>",
spdf$admin, spdf$labelrank
) %>% lapply(htmltools::HTML)
m <- leaflet(spdf) %>%
setView(15, 54, 3) %>%
addProviderTiles("MapBox", options = providerTileOptions(
id = "mapbox.light",
accessToken = Sys.getenv('MAPBOX_ACCESS_TOKEN')))
m %>% addPolygons(
fillColor = ~pal(labelrank),
weight = 2,
opacity = 1,
color = "white",
dashArray = "3",
fillOpacity = 0.7,
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto")
)
library(shiny); runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
install.packages("gtools")
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
shiny::runApp('Lines/basic-income')
runApp('Lines/basic-income/script.R')
runApp('Lines/basic-income')
library(geojsonio)
library(maptools)
# read_data <- function() {
##Make sure to set wd to git folder
# spatial data for map
spdf <- geojson_read("europe.geo.json",  what = "sp")
# Data frames
Raw_Data <- read_csv("data\\Raw_full_names.csv")
HPI <- read_csv("data\\HPI.csv")
### Cleaning raw data
# voting patterns
Raw_Data$counted <- 1
(summ <- ddply(Raw_Data, .(Country, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
agg_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
tibble_data = as_tibble(agg_data)
# votes for
votes <- tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would vote for it')
colnames(votes)[colnames(votes)=="perc"] <- "vote_for"
votes$question_bbi_2016wave4_basicincome_vote <- NULL
# votes$counter <- NULL
# probably for
votes["probably_for"] <- (tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would probably vote for it'))["perc"]
# no vote
votes["no_vote"] <- (tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would not vote'))["perc"]
## workaround for missing data
# probably against
probably_against <- tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would probably vote against it')
colnames(probably_against)[colnames(probably_against)=="perc"] <- "probably_against"
probably_against$question_bbi_2016wave4_basicincome_vote <- NULL
probably_against$counter <- NULL
#against
against <- tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would vote against it')
colnames(against)[colnames(against)=="perc"] <- "against"
against$question_bbi_2016wave4_basicincome_vote <- NULL
against$counter <- NULL
votes <- merge(votes, probably_against, by="Country")
votes <- merge(votes, against, by="Country")
###
# binding dataframe to spatial data
o <- match(spdf$admin, votes$Country)
xtra1 <- votes[o,]
row.names(xtra1) <- row.names(spdf)
map_data <- spCbind(spdf, xtra1)
### Data for bar charts
## age groups
(summ <- ddply(Raw_Data, .(Country, age_group, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
age_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
## Gender
(summ <- ddply(Raw_Data, .(Country, gender, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
gender_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
## Full-time job
(summ <- ddply(Raw_Data, .(Country, dem_full_time_job, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
job_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
### Data for bubble chart
bubble_data <-  merge(HPI, votes, by="Country")
# }
add_country = function(input) {
plot_age_1 <- age_data %>% filter(Country == input)
x_1 <- plot_age_1 %>% filter(question_bbi_2016wave4_basicincome_vote == "I would vote for it")
x_1 = mutate(x_1, percentage = (counter / sum(counter)) * 100   )
matrix_1 = x_1 %>% remove_rownames %>% column_to_rownames(var="age_group")
matrix_1$question_bbi_2016wave4_basicincome_vote <- NULL
matrix_1$counter <- NULL
matrix_1$perc <- NULL
Country = (matrix_1$Country)[1]
matrix_1$Country <- NULL
matrix_1 = t(matrix_1)
row.names(matrix_1)[1] <- Country
matrix_1 = data.frame(matrix_1)
return(matrix_1)
}
remove_country = function(country) {
bar_data <- bar_data[!rownames(bar_data) %in% country, ]
return(bar_data)
}
runApp('Lines/basic-income')
library(geojsonio)
library(maptools)
# read_data <- function() {
##Make sure to set wd to git folder
# spatial data for map
spdf <- geojson_read("europe.geo.json",  what = "sp")
# Data frames
Raw_Data <- read_csv("data/Raw_full_names.csv")
HPI <- read_csv("data/HPI.csv")
### Cleaning raw data
# voting patterns
Raw_Data$counted <- 1
(summ <- ddply(Raw_Data, .(Country, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
agg_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
tibble_data = as_tibble(agg_data)
# votes for
votes <- tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would vote for it')
colnames(votes)[colnames(votes)=="perc"] <- "vote_for"
votes$question_bbi_2016wave4_basicincome_vote <- NULL
# votes$counter <- NULL
# probably for
votes["probably_for"] <- (tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would probably vote for it'))["perc"]
# no vote
votes["no_vote"] <- (tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would not vote'))["perc"]
## workaround for missing data
# probably against
probably_against <- tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would probably vote against it')
colnames(probably_against)[colnames(probably_against)=="perc"] <- "probably_against"
probably_against$question_bbi_2016wave4_basicincome_vote <- NULL
probably_against$counter <- NULL
#against
against <- tibble_data %>% filter(question_bbi_2016wave4_basicincome_vote == 'I would vote against it')
colnames(against)[colnames(against)=="perc"] <- "against"
against$question_bbi_2016wave4_basicincome_vote <- NULL
against$counter <- NULL
votes <- merge(votes, probably_against, by="Country")
votes <- merge(votes, against, by="Country")
###
# binding dataframe to spatial data
o <- match(spdf$admin, votes$Country)
xtra1 <- votes[o,]
row.names(xtra1) <- row.names(spdf)
map_data <- spCbind(spdf, xtra1)
### Data for bar charts
## age groups
(summ <- ddply(Raw_Data, .(Country, age_group, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
age_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
## Gender
(summ <- ddply(Raw_Data, .(Country, gender, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
gender_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
## Full-time job
(summ <- ddply(Raw_Data, .(Country, dem_full_time_job, question_bbi_2016wave4_basicincome_vote), summarize, counter=sum(counted)))
job_data = ddply(summ, .(Country), mutate, perc = (counter / sum(counter)) * 100)
### Data for bubble chart
bubble_data <-  merge(HPI, votes, by="Country")
# }
add_country = function(input) {
plot_age_1 <- age_data %>% filter(Country == input)
x_1 <- plot_age_1 %>% filter(question_bbi_2016wave4_basicincome_vote == "I would vote for it")
x_1 = mutate(x_1, percentage = (counter / sum(counter)) * 100   )
matrix_1 = x_1 %>% remove_rownames %>% column_to_rownames(var="age_group")
matrix_1$question_bbi_2016wave4_basicincome_vote <- NULL
matrix_1$counter <- NULL
matrix_1$perc <- NULL
Country = (matrix_1$Country)[1]
matrix_1$Country <- NULL
matrix_1 = t(matrix_1)
row.names(matrix_1)[1] <- Country
matrix_1 = data.frame(matrix_1)
return(matrix_1)
}
remove_country = function(country) {
bar_data <- bar_data[!rownames(bar_data) %in% country, ]
return(bar_data)
}
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
View(against)
View(against)
View(age_data)
View(agg_data)
View(age_data)
View(agg_data)
View(agg_data)
View(df)
View(add_country)
View(adjust)
View(against)
View(items)
View(items)
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
items <- read.csv("data/basic_income_dataset_dalia.csv")
items <- read.csv("data/basic_income_dataset_dalia.csv")
items <- read.csv("data/basic_income_dataset_dalia.csv")
shiny::runApp('Lines/basic-income')
runApp('Lines/basic-income')
runApp('Lines/basic-income')
setwd("~/Lines/basic-income")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
